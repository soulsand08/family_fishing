# 📊 プレゼン用・技術解説カンニングペーパー

この資料は、プレゼンの流れ（① システム構成、②ER 図、③ 実演）に合わせて、話すべきポイントと「ツッコミ」への対策をまとめたものです。

---

## ① システム構成図 (System Architecture)

**【狙い】: 本格的な「Web 3 層構造」と、AI との連携をアピールする。**

### 🗣️ 話すこと（台本）

> 「本システムの構成です。プロフェッショナルな開発でも使われる標準的な **Web 3 層構造** を採用しています。
>
> 1. **プレゼンテーション層（フロントエンド）**: HTML/CSS と Vanilla JavaScript で構築しました。ブラウザだけでなく、PyWebView を使うことで、Web 技術をそのままデスクトップアプリとして配布・動作させる構成にしています。
> 2. **アプリケーション層（バックエンド）**: **Flask** を採用し、本番環境でも耐えうる **Waitress** サーバーで動作させています。ここでビジネスロジックを処理し、外部の **Google Gemini API** と動的に連携しています。
> 3. **データ層（インフラ/データベース）**: **Docker** 上に構築した **PostgreSQL** です。単なるデータの保存だけでなく、**pgvector** 拡張機能を使うことで、『意味で検索する』高度なベクトル探索を DB 内部で実現しています。
>
> これにより、AI が単に一般論を話すのではなく、DB の実データに基づいた文脈のあるアドバイスを可能にする **RAG（検索拡張生成）** の構成を構築しました。」

### 💡 追記ポイント

- **MCP の話題**: 「構成図上は現在 Flask が仲介していますが、将来的には **MCP（Model Context Protocol）** を導入し、AI が自律的に DB ツールを使い分ける設計への拡張を想定しています」と付け加えると高評価です。

---

## ② 実体関連図 (ER Diagram)

**【狙い】: データベース設計の「正しさ（正規化）」と「整合性」をアピールする。**

### 🗣️ 話すこと（台本）

> 「次にデータベース設計です。本設計では **第 3 次正規化** を適用し、情報の重複を徹底的に排除しました。
> 中心となるのは `tanka_pool` テーブルで、`users` と `categories` に対し、それぞれ **外部キー（Foreign Key）** による参照整合性制約を設けています。
> 短歌とカテゴリは **多対多（Many-to-Many）** の関係にあるため、中間テーブル `tanka_categories` を介して効率的に管理しています。また、`exchange_history` テーブルを分けることで、交換ロジックとマスタデータを分離し、データの不変性を守る設計にしました。」

---

## ③ 登場する 5 つの主要機能

**【プレゼン序盤の紹介用】: 何ができるアプリなのかを端的に伝えます。**

| 機能名              | ユーザーができること       | 得られる体験                             |
| :------------------ | :------------------------- | :--------------------------------------- |
| **1. 匿名交換**     | 自分の短歌を 1 首投稿する  | 誰かから 1 首届く（一期一会の交流）      |
| **2. 受信履歴**     | 過去に受け取った歌を見返す | 誰かの感性と自分の記憶をつなぎ直す       |
| **3. 世の歌人たち** | 人気の歌やカテゴリを見る   | 今、世の中でどんな歌が詠まれているか知る |
| **4. 私の歌集**     | 自分の投稿数や傾向を見る   | 自分の詠み人としての成長を実感する       |
| **5. AI 歌人**      | AI に悩みや歌の相談をする  | 投稿データに基づいた的確な助評をもらう   |

---

## ④ 実演デモ (Live Demo)

**【狙い】: 機能の説明から、「技術的裏付け」へとスムーズに繋げます。**

### 🗣️ 実況シーケンス

#### 1. 短歌を送信・交換する

- **【機能の説明】**: 「自分の短歌を 1 首投げ込むと、代わりに知らない誰かの短歌が 1 首返ってくる、このアプリのコア機能です。」
- **【操作】**: 「短歌を交換する」をクリックし、短歌を入力して送信。
- **【💡 技術の隠し味（ナレーション）】**: 「内部では『自分の歌を保存』『相手の歌を抽出・削除』『履歴の記録』の 3 つを **1 つのトランザクション** として実行し、データの不整合を防ぐ **ACID 特性** を担保しています。」

#### 2. 受け取った短歌を見る

- **【機能の説明】**: 「過去に誰かから受け取った一期一会の短歌を、いつでも読み返すことができる記録帳です。」
- **【操作】**: 「受け取った短歌を見る」をクリック。
- **【💡 技術の隠し味（ナレーション）】**: 「この履歴は **外部キー（Foreign Key）** を利用し、データベースから自分のセッションに紐づくデータだけを動的に抽出しています」

#### 3. 世の歌人たち（統計）を表示する

- **【機能の説明】**: 「世の歌人たちの間では、どのカテゴリの短歌が人気か、どんな歌が多く交換されているかをリアルタイムに集計しています。」
- **&nbsp;【操作】**: 「世の歌人たち」をクリック。
- **【💡 技術の隠し味（ナレーション）】**: 「ここでは **3 つのテーブルを INNER JOIN** し、さらに **相関サブクエリ** を用いて全カテゴリの交換回数をリアルタイム算出しています。DB の高度な集計能力を活用しています。」

#### 4. 私の歌集（マイ統計）を表示する

- **【機能の説明】**: 「自分がこれまでに何首詠み、いつ交換したかといった、自分の『歌集』としてのデータを分析できます。」
- **【操作】**: 「私の歌集」をクリック。
- **【💡 技術の隠し味（ナレーション）】**: 「正規化されたテーブル設計により、大量의データの中から特定のユーザーに関する統計値だけをミスなく、かつ高速に抽出して表示しています。」

#### 5. AI 歌人に相談（AI Advisor）

- **【機能の説明】**: 「悩みや自作の歌について相談すると、過去の投稿データを踏まえた『歌人』らしいアドバイスがもらえます。」
- **【操作】**: 「AI 歌人に相談」をクリックし、送信。
- **【💡 技術の隠し味（ナレーション）】**: 「これは **RAG（検索拡張生成）** という手法です。今回は単なるキーワード検索ではなく、PostgreSQL の **pgvector** 拡張と Gemini の **Embedding API** を組み合わせた『ベクトル探索』を実装しています。これにより、言葉が直接一致しなくても、AI が『意味の近さ』で関連する短歌をデータベースから探し出し、文脈に沿ったアドバイスを生成できます。」

---

## 🏁 プレゼンのコツ

- **「DB」を主役にする**: AI の凄さだけでなく、「AI のために DB をどう活用しているか（RAG/Context）」を強調すると、データベースの授業としての評価が上がります。
- **自信を持って話す**: 難しい言葉（ACID、正規化、RAG）をひとつずつ丁寧に置くように話すと、技術力が非常に高く見えます。

応援しています！🚀🔥
