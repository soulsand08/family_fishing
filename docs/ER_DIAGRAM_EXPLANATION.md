# ER 図・テーブル関係性：プレゼン用「カンペ」

ER 図を見せながら説明する際に、そのまま読み上げるだけで「DB 設計のプロ」っぽく聞こえる解説台本です。

---

## 1. 全体像の説明（最初の一言）

> 「本システムのデータベース構成は、**多対多**の複雑な関係も整理できるように**第 3 次正規化**を行い、5 つのテーブルで構成しています。すべての関係には**外部キー (Foreign Key)** を設定し、データの整合性を保証しています。」

---

## 2. 各テーブルの「つながり」解説（ここが本番！）

画面の図を指差しながら、左から順に説明するイメージです。

### ① ユーザー (users) ↔ 短歌 (tanka_pool)

- **関係**: 1 対 多 (One-to-Many)
- **解説**: 「1 人のユーザーが複数の短歌を投稿できる関係です。`user_id` を外部キーとして紐付けており、誰がどの歌を詠んだかを管理しています。」

### ② 短歌 (tanka_pool) ↔ カテゴリ (categories)

- **関係**: **多 対 多 (Many-to-Many)** ← **重要！高得点ポイント**
- **解説**: 「1 つの短歌に複数のカテゴリ（『春』と『喜び』など）がつく可能性があり、逆に 1 つのカテゴリにも多くの短歌が含まれます。そのため、**中間テーブル (`tanka_categories`)** を介してこの多対多の関係を解消しています。」

### ③ ユーザー (users) ↔ 交換履歴 (exchange_history)

- **関係**: 1 対 多 (One-to-Many)
- **解説**: 「ユーザーごとの交換の軌跡を記録するテーブルです。ここでも `user_id` を外部キーとして参照しており、ユーザー統計（マイ統計）の表示に活用しています。」

---

## 3. 「こだわりポイント」を突っ込まれたら

先生が技術的な質問をしてきた時の返し技です。

- **Q: なぜ中間テーブルを使っているの？**
  - **A**: 「多対多の関係をそのまま実装するとデータの重複や検索の非効率が発生するため、中間テーブルを置いて**関係を正規化**するのが DB 設計のベストプラクティスだと判断しました。」
- **Q: 削除時の連携 (ON DELETE) は？**
  - **A**: 「整合性を守るため、例えばカテゴリが消えたら中間テーブルの関連データも消える `ON DELETE CASCADE` を設定していますが、ユーザーが消えても短歌の本文は残るように `SET NULL` を使うなど、データの意味に合わせて使い分けています。」

---

## 💡 発表時のアドバイス

- **PK (Primary Key)** と **FK (Foreign Key)** という言葉をあえて使うと、専門知識があることが一発で伝わります。
- 図の中の「鳥の足みたいなマーク」は、「多（たくさん）」を意味している、と覚えておいてください。

これで ER 図の説明は完璧です！自信を持って指差してください。
