{% extends "base.html" %}

{% block title %}私の歌集 - 匿名短歌交換{% endblock %}

{% block content %}
<div class="history-content">
    <h2>私の歌集</h2>

    <div id="history-list" class="history-list">
        {% if history %}
            {% for item in history %}
            <div class="history-item">
                <div class="history-date">{{ item[3].strftime('%Y/%m/%d %H:%M:%S') }}</div>
                <div class="tanka-display">
                    {% for line in item[2].split('\n') %}
                    <p class="tanka-line">{{ line }}</p>
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div id="no-history" class="no-history">
                <p>まだ短歌を受け取っていません</p>
                <a href="{{ url_for('submit') }}" class="btn btn-primary">短歌を交換する</a>
            </div>
        {% endif %}
    </div>

    <div class="history-actions">
        <a href="{{ url_for('home') }}" class="btn btn-secondary">ホームへ</a>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- 履歴はサーバー側のデータベースから直接描画されるため、クライアントサイドのスクリプトは不要です -->
{% endblock %}